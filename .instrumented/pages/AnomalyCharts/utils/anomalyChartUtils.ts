function cov_al8854gx1() {
  var path = "/Users/yizheliu/casesafe/workspace/kibana-780/kibana/plugins/anomaly-detection-kibana-plugin/public/pages/AnomalyCharts/utils/anomalyChartUtils.ts";
  var hash = "c4f8d43c44ec2839873f484b1340cb0c2893b842";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/yizheliu/casesafe/workspace/kibana-780/kibana/plugins/anomaly-detection-kibana-plugin/public/pages/AnomalyCharts/utils/anomalyChartUtils.ts",
    statementMap: {
      "0": {
        start: {
          line: 27,
          column: 30
        },
        end: {
          line: 61,
          column: 1
        }
      },
      "1": {
        start: {
          line: 28,
          column: 2
        },
        end: {
          line: 60,
          column: 4
        }
      },
      "2": {
        start: {
          line: 63,
          column: 29
        },
        end: {
          line: 77,
          column: 1
        }
      },
      "3": {
        start: {
          line: 64,
          column: 15
        },
        end: {
          line: 64,
          column: 59
        }
      },
      "4": {
        start: {
          line: 65,
          column: 2
        },
        end: {
          line: 76,
          column: 5
        }
      },
      "5": {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 75,
          column: 6
        }
      },
      "6": {
        start: {
          line: 79,
          column: 24
        },
        end: {
          line: 90,
          column: 1
        }
      },
      "7": {
        start: {
          line: 80,
          column: 18
        },
        end: {
          line: 88,
          column: 48
        }
      },
      "8": {
        start: {
          line: 89,
          column: 2
        },
        end: {
          line: 89,
          column: 76
        }
      },
      "9": {
        start: {
          line: 92,
          column: 40
        },
        end: {
          line: 98,
          column: 1
        }
      },
      "10": {
        start: {
          line: 93,
          column: 2
        },
        end: {
          line: 97,
          column: 6
        }
      },
      "11": {
        start: {
          line: 93,
          column: 46
        },
        end: {
          line: 97,
          column: 3
        }
      },
      "12": {
        start: {
          line: 100,
          column: 26
        },
        end: {
          line: 105,
          column: 1
        }
      },
      "13": {
        start: {
          line: 101,
          column: 24
        },
        end: {
          line: 103,
          column: 3
        }
      },
      "14": {
        start: {
          line: 102,
          column: 4
        },
        end: {
          line: 102,
          column: 75
        }
      },
      "15": {
        start: {
          line: 104,
          column: 2
        },
        end: {
          line: 104,
          column: 23
        }
      },
      "16": {
        start: {
          line: 107,
          column: 33
        },
        end: {
          line: 143,
          column: 1
        }
      },
      "17": {
        start: {
          line: 108,
          column: 2
        },
        end: {
          line: 110,
          column: 3
        }
      },
      "18": {
        start: {
          line: 109,
          column: 4
        },
        end: {
          line: 109,
          column: 35
        }
      },
      "19": {
        start: {
          line: 111,
          column: 20
        },
        end: {
          line: 111,
          column: 78
        }
      },
      "20": {
        start: {
          line: 111,
          column: 53
        },
        end: {
          line: 111,
          column: 77
        }
      },
      "21": {
        start: {
          line: 112,
          column: 24
        },
        end: {
          line: 115,
          column: 3
        }
      },
      "22": {
        start: {
          line: 113,
          column: 32
        },
        end: {
          line: 113,
          column: 50
        }
      },
      "23": {
        start: {
          line: 116,
          column: 24
        },
        end: {
          line: 119,
          column: 3
        }
      },
      "24": {
        start: {
          line: 117,
          column: 32
        },
        end: {
          line: 117,
          column: 50
        }
      },
      "25": {
        start: {
          line: 121,
          column: 26
        },
        end: {
          line: 124,
          column: 3
        }
      },
      "26": {
        start: {
          line: 122,
          column: 32
        },
        end: {
          line: 122,
          column: 52
        }
      },
      "27": {
        start: {
          line: 125,
          column: 26
        },
        end: {
          line: 128,
          column: 3
        }
      },
      "28": {
        start: {
          line: 126,
          column: 32
        },
        end: {
          line: 126,
          column: 52
        }
      },
      "29": {
        start: {
          line: 131,
          column: 4
        },
        end: {
          line: 133,
          column: 11
        }
      },
      "30": {
        start: {
          line: 135,
          column: 2
        },
        end: {
          line: 142,
          column: 4
        }
      },
      "31": {
        start: {
          line: 145,
          column: 42
        },
        end: {
          line: 176,
          column: 1
        }
      },
      "32": {
        start: {
          line: 149,
          column: 2
        },
        end: {
          line: 151,
          column: 3
        }
      },
      "33": {
        start: {
          line: 150,
          column: 4
        },
        end: {
          line: 150,
          column: 14
        }
      },
      "34": {
        start: {
          line: 152,
          column: 20
        },
        end: {
          line: 152,
          column: 41
        }
      },
      "35": {
        start: {
          line: 153,
          column: 18
        },
        end: {
          line: 155,
          column: 33
        }
      },
      "36": {
        start: {
          line: 158,
          column: 4
        },
        end: {
          line: 162,
          column: 73
        }
      },
      "37": {
        start: {
          line: 164,
          column: 4
        },
        end: {
          line: 166,
          column: 37
        }
      },
      "38": {
        start: {
          line: 167,
          column: 2
        },
        end: {
          line: 175,
          column: 4
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 27,
            column: 30
          },
          end: {
            line: 27,
            column: 31
          }
        },
        loc: {
          start: {
            line: 27,
            column: 72
          },
          end: {
            line: 61,
            column: 1
          }
        },
        line: 27
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 63,
            column: 29
          },
          end: {
            line: 63,
            column: 30
          }
        },
        loc: {
          start: {
            line: 63,
            column: 64
          },
          end: {
            line: 77,
            column: 1
          }
        },
        line: 63
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 65,
            column: 18
          },
          end: {
            line: 65,
            column: 19
          }
        },
        loc: {
          start: {
            line: 65,
            column: 34
          },
          end: {
            line: 76,
            column: 3
          }
        },
        line: 65
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 79,
            column: 24
          },
          end: {
            line: 79,
            column: 25
          }
        },
        loc: {
          start: {
            line: 79,
            column: 57
          },
          end: {
            line: 90,
            column: 1
          }
        },
        line: 79
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 92,
            column: 40
          },
          end: {
            line: 92,
            column: 41
          }
        },
        loc: {
          start: {
            line: 92,
            column: 75
          },
          end: {
            line: 98,
            column: 1
          }
        },
        line: 92
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 93,
            column: 20
          },
          end: {
            line: 93,
            column: 21
          }
        },
        loc: {
          start: {
            line: 93,
            column: 46
          },
          end: {
            line: 97,
            column: 3
          }
        },
        line: 93
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 100,
            column: 26
          },
          end: {
            line: 100,
            column: 27
          }
        },
        loc: {
          start: {
            line: 100,
            column: 48
          },
          end: {
            line: 105,
            column: 1
          }
        },
        line: 100
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 101,
            column: 41
          },
          end: {
            line: 101,
            column: 42
          }
        },
        loc: {
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 102,
            column: 75
          }
        },
        line: 102
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 107,
            column: 33
          },
          end: {
            line: 107,
            column: 34
          }
        },
        loc: {
          start: {
            line: 107,
            column: 76
          },
          end: {
            line: 143,
            column: 1
          }
        },
        line: 107
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 111,
            column: 42
          },
          end: {
            line: 111,
            column: 43
          }
        },
        loc: {
          start: {
            line: 111,
            column: 53
          },
          end: {
            line: 111,
            column: 77
          }
        },
        line: 111
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 113,
            column: 21
          },
          end: {
            line: 113,
            column: 22
          }
        },
        loc: {
          start: {
            line: 113,
            column: 32
          },
          end: {
            line: 113,
            column: 50
          }
        },
        line: 113
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 117,
            column: 21
          },
          end: {
            line: 117,
            column: 22
          }
        },
        loc: {
          start: {
            line: 117,
            column: 32
          },
          end: {
            line: 117,
            column: 50
          }
        },
        line: 117
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 122,
            column: 21
          },
          end: {
            line: 122,
            column: 22
          }
        },
        loc: {
          start: {
            line: 122,
            column: 32
          },
          end: {
            line: 122,
            column: 52
          }
        },
        line: 122
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 126,
            column: 21
          },
          end: {
            line: 126,
            column: 22
          }
        },
        loc: {
          start: {
            line: 126,
            column: 32
          },
          end: {
            line: 126,
            column: 52
          }
        },
        line: 126
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 145,
            column: 42
          },
          end: {
            line: 145,
            column: 43
          }
        },
        loc: {
          start: {
            line: 148,
            column: 28
          },
          end: {
            line: 176,
            column: 1
          }
        },
        line: 148
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 80,
            column: 18
          },
          end: {
            line: 88,
            column: 48
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 85,
            column: 10
          }
        }, {
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 88,
            column: 48
          }
        }],
        line: 80
      },
      "1": {
        loc: {
          start: {
            line: 89,
            column: 9
          },
          end: {
            line: 89,
            column: 75
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 89,
            column: 23
          },
          end: {
            line: 89,
            column: 65
          }
        }, {
          start: {
            line: 89,
            column: 68
          },
          end: {
            line: 89,
            column: 75
          }
        }],
        line: 89
      },
      "2": {
        loc: {
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 102,
            column: 75
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 102,
            column: 51
          },
          end: {
            line: 102,
            column: 62
          }
        }, {
          start: {
            line: 102,
            column: 65
          },
          end: {
            line: 102,
            column: 75
          }
        }],
        line: 102
      },
      "3": {
        loc: {
          start: {
            line: 108,
            column: 2
          },
          end: {
            line: 110,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 108,
            column: 2
          },
          end: {
            line: 110,
            column: 3
          }
        }, {
          start: {
            line: 108,
            column: 2
          },
          end: {
            line: 110,
            column: 3
          }
        }],
        line: 108
      },
      "4": {
        loc: {
          start: {
            line: 108,
            column: 6
          },
          end: {
            line: 108,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 108,
            column: 6
          },
          end: {
            line: 108,
            column: 33
          }
        }, {
          start: {
            line: 108,
            column: 37
          },
          end: {
            line: 108,
            column: 64
          }
        }],
        line: 108
      },
      "5": {
        loc: {
          start: {
            line: 131,
            column: 4
          },
          end: {
            line: 133,
            column: 11
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 132,
            column: 8
          },
          end: {
            line: 132,
            column: 65
          }
        }, {
          start: {
            line: 133,
            column: 8
          },
          end: {
            line: 133,
            column: 11
          }
        }],
        line: 131
      },
      "6": {
        loc: {
          start: {
            line: 137,
            column: 21
          },
          end: {
            line: 137,
            column: 76
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 137,
            column: 57
          },
          end: {
            line: 137,
            column: 58
          }
        }, {
          start: {
            line: 137,
            column: 61
          },
          end: {
            line: 137,
            column: 76
          }
        }],
        line: 137
      },
      "7": {
        loc: {
          start: {
            line: 139,
            column: 19
          },
          end: {
            line: 139,
            column: 68
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 139,
            column: 51
          },
          end: {
            line: 139,
            column: 52
          }
        }, {
          start: {
            line: 139,
            column: 55
          },
          end: {
            line: 139,
            column: 68
          }
        }],
        line: 139
      },
      "8": {
        loc: {
          start: {
            line: 149,
            column: 2
          },
          end: {
            line: 151,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 149,
            column: 2
          },
          end: {
            line: 151,
            column: 3
          }
        }, {
          start: {
            line: 149,
            column: 2
          },
          end: {
            line: 151,
            column: 3
          }
        }],
        line: 149
      },
      "9": {
        loc: {
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 149,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 149,
            column: 15
          }
        }, {
          start: {
            line: 149,
            column: 19
          },
          end: {
            line: 149,
            column: 41
          }
        }],
        line: 149
      },
      "10": {
        loc: {
          start: {
            line: 153,
            column: 18
          },
          end: {
            line: 155,
            column: 33
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 154,
            column: 6
          },
          end: {
            line: 154,
            column: 26
          }
        }, {
          start: {
            line: 155,
            column: 6
          },
          end: {
            line: 155,
            column: 33
          }
        }],
        line: 153
      },
      "11": {
        loc: {
          start: {
            line: 158,
            column: 4
          },
          end: {
            line: 162,
            column: 73
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 159,
            column: 8
          },
          end: {
            line: 161,
            column: 53
          }
        }, {
          start: {
            line: 162,
            column: 8
          },
          end: {
            line: 162,
            column: 73
          }
        }],
        line: 158
      },
      "12": {
        loc: {
          start: {
            line: 158,
            column: 4
          },
          end: {
            line: 158,
            column: 44
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 158,
            column: 4
          },
          end: {
            line: 158,
            column: 20
          }
        }, {
          start: {
            line: 158,
            column: 24
          },
          end: {
            line: 158,
            column: 44
          }
        }],
        line: 158
      },
      "13": {
        loc: {
          start: {
            line: 164,
            column: 4
          },
          end: {
            line: 166,
            column: 37
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 165,
            column: 8
          },
          end: {
            line: 165,
            column: 17
          }
        }, {
          start: {
            line: 166,
            column: 8
          },
          end: {
            line: 166,
            column: 37
          }
        }],
        line: 164
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c4f8d43c44ec2839873f484b1340cb0c2893b842"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_al8854gx1 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_al8854gx1();

/*
 * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License").
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the "license" file accompanying this file. This file is distributed
 * on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
import { get } from 'lodash';
import { DateRange, Detector, MonitorAlert, AnomalySummary } from '../../../models/interfaces';
import { dateFormatter, minuteDateFormatter } from '../../utils/helpers';
import { RectAnnotationDatum } from '@elastic/charts';
import { DEFAULT_ANOMALY_SUMMARY } from './constants';
cov_al8854gx1().s[0]++;
export const getAlertsQuery = (monitorId: string, startTime: number) => {
  cov_al8854gx1().f[0]++;
  cov_al8854gx1().s[1]++;
  return {
    index: '.opendistro-alerting-alert*',
    size: 1000,
    rawQuery: {
      aggregations: {
        total_alerts: {
          value_count: {
            field: 'monitor_id'
          }
        }
      },
      query: {
        bool: {
          filter: [{
            term: {
              monitor_id: monitorId
            }
          }, {
            range: {
              start_time: {
                gte: startTime,
                format: 'epoch_millis'
              }
            }
          }]
        }
      },
      sort: [{
        start_time: {
          order: 'desc'
        }
      }]
    }
  };
};
cov_al8854gx1().s[2]++;
export const convertAlerts = (response: any): MonitorAlert[] => {
  cov_al8854gx1().f[1]++;
  const hits = (cov_al8854gx1().s[3]++, get(response, 'data.response.hits.hits', []));
  cov_al8854gx1().s[4]++;
  return hits.map((alert: any) => {
    cov_al8854gx1().f[2]++;
    cov_al8854gx1().s[5]++;
    return {
      monitorName: get(alert, '_source.monitor_name'),
      triggerName: get(alert, '_source.trigger_name'),
      severity: get(alert, '_source.severity'),
      state: get(alert, '_source.state'),
      error: get(alert, '_source.error_message'),
      startTime: get(alert, '_source.start_time'),
      endTime: get(alert, '_source.end_time'),
      acknowledgedTime: get(alert, '_source.acknowledged_time')
    };
  });
};
cov_al8854gx1().s[6]++;

const getAlertMessage = (alert: MonitorAlert): string => {
  cov_al8854gx1().f[3]++;
  const message = (cov_al8854gx1().s[7]++, alert.endTime ? (cov_al8854gx1().b[0][0]++, `There is a severity ${alert.severity} alert with state ${alert.state} between ${dateFormatter(alert.startTime)} and ${dateFormatter(alert.endTime)}.`) : (cov_al8854gx1().b[0][1]++, `There is a severity ${alert.severity} alert with state ${alert.state} from ${dateFormatter(alert.startTime)}.`));
  cov_al8854gx1().s[8]++;
  return alert.error ? (cov_al8854gx1().b[1][0]++, `${message} Error message: ${alert.error}`) : (cov_al8854gx1().b[1][1]++, message);
};

cov_al8854gx1().s[9]++;
export const generateAlertAnnotations = (alerts: MonitorAlert[]): any[] => {
  cov_al8854gx1().f[4]++;
  cov_al8854gx1().s[10]++;
  return alerts.map((alert: MonitorAlert) => {
    cov_al8854gx1().f[5]++;
    cov_al8854gx1().s[11]++;
    return {
      header: dateFormatter(alert.startTime),
      dataValue: alert.startTime,
      details: getAlertMessage(alert)
    };
  });
};
cov_al8854gx1().s[12]++;

const findLatestAnomaly = (anomalies: any[]) => {
  cov_al8854gx1().f[6]++;
  const latestAnomaly = (cov_al8854gx1().s[13]++, anomalies.reduce((prevAnomaly, curAnomaly) => {
    cov_al8854gx1().f[7]++;
    cov_al8854gx1().s[14]++;
    return prevAnomaly.startTime > curAnomaly.startTime ? (cov_al8854gx1().b[2][0]++, prevAnomaly) : (cov_al8854gx1().b[2][1]++, curAnomaly);
  }));
  cov_al8854gx1().s[15]++;
  return latestAnomaly;
};

cov_al8854gx1().s[16]++;
export const getAnomalySummary = (totalAnomalies: any[]): AnomalySummary => {
  cov_al8854gx1().f[8]++;
  cov_al8854gx1().s[17]++;

  if ((cov_al8854gx1().b[4][0]++, totalAnomalies == undefined) || (cov_al8854gx1().b[4][1]++, totalAnomalies.length === 0)) {
    cov_al8854gx1().b[3][0]++;
    cov_al8854gx1().s[18]++;
    return DEFAULT_ANOMALY_SUMMARY;
  } else {
    cov_al8854gx1().b[3][1]++;
  }

  const anomalies = (cov_al8854gx1().s[19]++, totalAnomalies.filter(anomaly => {
    cov_al8854gx1().f[9]++;
    cov_al8854gx1().s[20]++;
    return anomaly.anomalyGrade > 0;
  }));
  const maxConfidence = (cov_al8854gx1().s[21]++, Math.max(...anomalies.map(anomaly => {
    cov_al8854gx1().f[10]++;
    cov_al8854gx1().s[22]++;
    return anomaly.confidence;
  }), 0.0));
  const minConfidence = (cov_al8854gx1().s[23]++, Math.min(...anomalies.map(anomaly => {
    cov_al8854gx1().f[11]++;
    cov_al8854gx1().s[24]++;
    return anomaly.confidence;
  }), 1.0));
  const maxAnomalyGrade = (cov_al8854gx1().s[25]++, Math.max(...anomalies.map(anomaly => {
    cov_al8854gx1().f[12]++;
    cov_al8854gx1().s[26]++;
    return anomaly.anomalyGrade;
  }), 0.0));
  const minAnomalyGrade = (cov_al8854gx1().s[27]++, Math.min(...anomalies.map(anomaly => {
    cov_al8854gx1().f[13]++;
    cov_al8854gx1().s[28]++;
    return anomaly.anomalyGrade;
  }), 1.0));
  const lastAnomalyOccurrence = (cov_al8854gx1().s[29]++, anomalies.length > 0 ? (cov_al8854gx1().b[5][0]++, minuteDateFormatter(findLatestAnomaly(anomalies).endTime)) : (cov_al8854gx1().b[5][1]++, '-'));
  cov_al8854gx1().s[30]++;
  return {
    anomalyOccurrence: anomalies.length,
    minAnomalyGrade: minAnomalyGrade > maxAnomalyGrade ? (cov_al8854gx1().b[6][0]++, 0) : (cov_al8854gx1().b[6][1]++, minAnomalyGrade),
    maxAnomalyGrade: maxAnomalyGrade,
    minConfidence: minConfidence > maxConfidence ? (cov_al8854gx1().b[7][0]++, 0) : (cov_al8854gx1().b[7][1]++, minConfidence),
    maxConfidence: maxConfidence,
    lastAnomalyOccurrence: lastAnomalyOccurrence
  };
};
cov_al8854gx1().s[31]++;
export const disabledHistoryAnnotations = (dateRange: DateRange, detector?: Detector): RectAnnotationDatum[] => {
  cov_al8854gx1().f[14]++;
  cov_al8854gx1().s[32]++;

  if ((cov_al8854gx1().b[9][0]++, !detector) || (cov_al8854gx1().b[9][1]++, !detector.disabledTime)) {
    cov_al8854gx1().b[8][0]++;
    cov_al8854gx1().s[33]++;
    return [];
  } else {
    cov_al8854gx1().b[8][1]++;
  }

  const startTime = (cov_al8854gx1().s[34]++, detector.disabledTime);
  const endTime = (cov_al8854gx1().s[35]++, detector.enabled ? (cov_al8854gx1().b[10][0]++, detector.enabledTime) : (cov_al8854gx1().b[10][1]++, dateRange.endDate.valueOf()));
  const details = (cov_al8854gx1().s[36]++, (cov_al8854gx1().b[12][0]++, detector.enabled) && (cov_al8854gx1().b[12][1]++, detector.enabledTime) ? (cov_al8854gx1().b[11][0]++, `Detector was stopped from ${dateFormatter(startTime)} to ${dateFormatter(detector.enabledTime)}`) : (cov_al8854gx1().b[11][1]++, `Detector was stopped from ${dateFormatter(startTime)} until now`));
  const coordinateX0 = (cov_al8854gx1().s[37]++, startTime >= dateRange.startDate.valueOf() ? (cov_al8854gx1().b[13][0]++, startTime) : (cov_al8854gx1().b[13][1]++, dateRange.startDate.valueOf()));
  cov_al8854gx1().s[38]++;
  return [{
    coordinates: {
      x0: coordinateX0,
      x1: endTime
    },
    details: details
  }];
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFub21hbHlDaGFydFV0aWxzLnRzIl0sIm5hbWVzIjpbImdldCIsIkRhdGVSYW5nZSIsIkRldGVjdG9yIiwiTW9uaXRvckFsZXJ0IiwiQW5vbWFseVN1bW1hcnkiLCJkYXRlRm9ybWF0dGVyIiwibWludXRlRGF0ZUZvcm1hdHRlciIsIlJlY3RBbm5vdGF0aW9uRGF0dW0iLCJERUZBVUxUX0FOT01BTFlfU1VNTUFSWSIsImdldEFsZXJ0c1F1ZXJ5IiwibW9uaXRvcklkIiwic3RhcnRUaW1lIiwiaW5kZXgiLCJzaXplIiwicmF3UXVlcnkiLCJhZ2dyZWdhdGlvbnMiLCJ0b3RhbF9hbGVydHMiLCJ2YWx1ZV9jb3VudCIsImZpZWxkIiwicXVlcnkiLCJib29sIiwiZmlsdGVyIiwidGVybSIsIm1vbml0b3JfaWQiLCJyYW5nZSIsInN0YXJ0X3RpbWUiLCJndGUiLCJmb3JtYXQiLCJzb3J0Iiwib3JkZXIiLCJjb252ZXJ0QWxlcnRzIiwicmVzcG9uc2UiLCJoaXRzIiwibWFwIiwiYWxlcnQiLCJtb25pdG9yTmFtZSIsInRyaWdnZXJOYW1lIiwic2V2ZXJpdHkiLCJzdGF0ZSIsImVycm9yIiwiZW5kVGltZSIsImFja25vd2xlZGdlZFRpbWUiLCJnZXRBbGVydE1lc3NhZ2UiLCJtZXNzYWdlIiwiZ2VuZXJhdGVBbGVydEFubm90YXRpb25zIiwiYWxlcnRzIiwiaGVhZGVyIiwiZGF0YVZhbHVlIiwiZGV0YWlscyIsImZpbmRMYXRlc3RBbm9tYWx5IiwiYW5vbWFsaWVzIiwibGF0ZXN0QW5vbWFseSIsInJlZHVjZSIsInByZXZBbm9tYWx5IiwiY3VyQW5vbWFseSIsImdldEFub21hbHlTdW1tYXJ5IiwidG90YWxBbm9tYWxpZXMiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJhbm9tYWx5IiwiYW5vbWFseUdyYWRlIiwibWF4Q29uZmlkZW5jZSIsIk1hdGgiLCJtYXgiLCJjb25maWRlbmNlIiwibWluQ29uZmlkZW5jZSIsIm1pbiIsIm1heEFub21hbHlHcmFkZSIsIm1pbkFub21hbHlHcmFkZSIsImxhc3RBbm9tYWx5T2NjdXJyZW5jZSIsImFub21hbHlPY2N1cnJlbmNlIiwiZGlzYWJsZWRIaXN0b3J5QW5ub3RhdGlvbnMiLCJkYXRlUmFuZ2UiLCJkZXRlY3RvciIsImRpc2FibGVkVGltZSIsImVuYWJsZWQiLCJlbmFibGVkVGltZSIsImVuZERhdGUiLCJ2YWx1ZU9mIiwiY29vcmRpbmF0ZVgwIiwic3RhcnREYXRlIiwiY29vcmRpbmF0ZXMiLCJ4MCIsIngxIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWVZOzs7Ozs7Ozs7O0FBZlo7Ozs7Ozs7Ozs7Ozs7O0FBZUEsU0FBU0EsR0FBVCxRQUFvQixRQUFwQjtBQUNBLFNBQ0VDLFNBREYsRUFFRUMsUUFGRixFQUdFQyxZQUhGLEVBSUVDLGNBSkYsUUFLTyw0QkFMUDtBQU1BLFNBQVNDLGFBQVQsRUFBd0JDLG1CQUF4QixRQUFtRCxxQkFBbkQ7QUFDQSxTQUFTQyxtQkFBVCxRQUFvQyxpQkFBcEM7QUFDQSxTQUFTQyx1QkFBVCxRQUF3QyxhQUF4Qzs7QUFFQSxPQUFPLE1BQU1DLGNBQWMsR0FBRyxDQUFDQyxTQUFTLEVBQUUsTUFBWixFQUFvQkMsU0FBUyxFQUFFLE1BQS9CLEtBQTBDO0FBQUE7QUFBQTtBQUN0RSxTQUFPO0FBQ0xDLElBQUFBLEtBQUssRUFBRSw2QkFERjtBQUVMQyxJQUFBQSxJQUFJLEVBQUUsSUFGRDtBQUdMQyxJQUFBQSxRQUFRLEVBQUU7QUFDUkMsTUFBQUEsWUFBWSxFQUFFO0FBQ1pDLFFBQUFBLFlBQVksRUFBRTtBQUNaQyxVQUFBQSxXQUFXLEVBQUU7QUFDWEMsWUFBQUEsS0FBSyxFQUFFO0FBREk7QUFERDtBQURGLE9BRE47QUFRUkMsTUFBQUEsS0FBSyxFQUFFO0FBQ0xDLFFBQUFBLElBQUksRUFBRTtBQUNKQyxVQUFBQSxNQUFNLEVBQUUsQ0FDTjtBQUNFQyxZQUFBQSxJQUFJLEVBQUU7QUFDSkMsY0FBQUEsVUFBVSxFQUFFYjtBQURSO0FBRFIsV0FETSxFQU1OO0FBQ0VjLFlBQUFBLEtBQUssRUFBRTtBQUNMQyxjQUFBQSxVQUFVLEVBQUU7QUFDVkMsZ0JBQUFBLEdBQUcsRUFBRWYsU0FESztBQUVWZ0IsZ0JBQUFBLE1BQU0sRUFBRTtBQUZFO0FBRFA7QUFEVCxXQU5NO0FBREo7QUFERCxPQVJDO0FBMkJSQyxNQUFBQSxJQUFJLEVBQUUsQ0FBQztBQUFFSCxRQUFBQSxVQUFVLEVBQUU7QUFBRUksVUFBQUEsS0FBSyxFQUFFO0FBQVQ7QUFBZCxPQUFEO0FBM0JFO0FBSEwsR0FBUDtBQWlDRCxDQWxDTTs7QUFvQ1AsT0FBTyxNQUFNQyxhQUFhLEdBQUcsQ0FBQ0MsUUFBUSxFQUFFLEdBQVgsQ0FBZSxFQUFFNUIsWUFBWSxFQUE3QixJQUFtQztBQUFBO0FBQzlELFFBQU02QixJQUFJLDRCQUFHaEMsR0FBRyxDQUFDK0IsUUFBRCxFQUFXLHlCQUFYLEVBQXNDLEVBQXRDLENBQU4sQ0FBVjtBQUQ4RDtBQUU5RCxTQUFPQyxJQUFJLENBQUNDLEdBQUwsQ0FBUyxDQUFDQyxLQUFLLEVBQUUsR0FBUixLQUFnQjtBQUFBO0FBQUE7QUFDOUIsV0FBTztBQUNMQyxNQUFBQSxXQUFXLEVBQUVuQyxHQUFHLENBQUNrQyxLQUFELEVBQVEsc0JBQVIsQ0FEWDtBQUVMRSxNQUFBQSxXQUFXLEVBQUVwQyxHQUFHLENBQUNrQyxLQUFELEVBQVEsc0JBQVIsQ0FGWDtBQUdMRyxNQUFBQSxRQUFRLEVBQUVyQyxHQUFHLENBQUNrQyxLQUFELEVBQVEsa0JBQVIsQ0FIUjtBQUlMSSxNQUFBQSxLQUFLLEVBQUV0QyxHQUFHLENBQUNrQyxLQUFELEVBQVEsZUFBUixDQUpMO0FBS0xLLE1BQUFBLEtBQUssRUFBRXZDLEdBQUcsQ0FBQ2tDLEtBQUQsRUFBUSx1QkFBUixDQUxMO0FBTUx2QixNQUFBQSxTQUFTLEVBQUVYLEdBQUcsQ0FBQ2tDLEtBQUQsRUFBUSxvQkFBUixDQU5UO0FBT0xNLE1BQUFBLE9BQU8sRUFBRXhDLEdBQUcsQ0FBQ2tDLEtBQUQsRUFBUSxrQkFBUixDQVBQO0FBUUxPLE1BQUFBLGdCQUFnQixFQUFFekMsR0FBRyxDQUFDa0MsS0FBRCxFQUFRLDJCQUFSO0FBUmhCLEtBQVA7QUFVRCxHQVhNLENBQVA7QUFZRCxDQWRNOzs7QUFnQlAsTUFBTVEsZUFBZSxHQUFHLENBQUNSLEtBQUssRUFBRS9CLFlBQVIsQ0FBcUIsRUFBRSxNQUF2QixJQUFpQztBQUFBO0FBQ3ZELFFBQU13QyxPQUFPLDRCQUFHVCxLQUFLLENBQUNNLE9BQU4sK0JBQ1gsdUJBQXNCTixLQUFLLENBQUNHLFFBQVMscUJBQ3BDSCxLQUFLLENBQUNJLEtBQ1AsWUFBV2pDLGFBQWEsQ0FBQzZCLEtBQUssQ0FBQ3ZCLFNBQVAsQ0FBa0IsUUFBT04sYUFBYSxDQUM3RDZCLEtBQUssQ0FBQ00sT0FEdUQsQ0FFN0QsR0FMVSxnQ0FNWCx1QkFBc0JOLEtBQUssQ0FBQ0csUUFBUyxxQkFDcENILEtBQUssQ0FBQ0ksS0FDUCxTQUFRakMsYUFBYSxDQUFDNkIsS0FBSyxDQUFDdkIsU0FBUCxDQUFrQixHQVI1QixDQUFILENBQWI7QUFEdUQ7QUFVdkQsU0FBT3VCLEtBQUssQ0FBQ0ssS0FBTiwrQkFBZSxHQUFFSSxPQUFRLG1CQUFrQlQsS0FBSyxDQUFDSyxLQUFNLEVBQXZELGdDQUEyREksT0FBM0QsQ0FBUDtBQUNELENBWEQ7OztBQWFBLE9BQU8sTUFBTUMsd0JBQXdCLEdBQUcsQ0FBQ0MsTUFBTSxFQUFFMUMsWUFBWSxFQUFyQixDQUF3QixFQUFFLEtBQTFCLElBQW1DO0FBQUE7QUFBQTtBQUN6RSxTQUFPMEMsTUFBTSxDQUFDWixHQUFQLENBQVcsQ0FBQ0MsS0FBSyxFQUFFL0IsWUFBUixLQUEwQjtBQUFBO0FBQUE7QUFBQTtBQUMxQzJDLE1BQUFBLE1BQU0sRUFBRXpDLGFBQWEsQ0FBQzZCLEtBQUssQ0FBQ3ZCLFNBQVAsQ0FEcUI7QUFFMUNvQyxNQUFBQSxTQUFTLEVBQUViLEtBQUssQ0FBQ3ZCLFNBRnlCO0FBRzFDcUMsTUFBQUEsT0FBTyxFQUFFTixlQUFlLENBQUNSLEtBQUQ7QUFIa0I7QUFJM0MsR0FKTSxDQUFQO0FBS0QsQ0FOTTs7O0FBUVAsTUFBTWUsaUJBQWlCLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLEtBQVosS0FBc0I7QUFBQTtBQUM5QyxRQUFNQyxhQUFhLDZCQUFHRCxTQUFTLENBQUNFLE1BQVYsQ0FBaUIsQ0FBQ0MsV0FBRCxFQUFjQyxVQUFkLEtBQ3JDO0FBQUE7QUFBQTtBQUFBLFdBQUFELFdBQVcsQ0FBQzFDLFNBQVosR0FBd0IyQyxVQUFVLENBQUMzQyxTQUFuQywrQkFBK0MwQyxXQUEvQyxnQ0FBNkRDLFVBQTdEO0FBQXVFLEdBRG5ELENBQUgsQ0FBbkI7QUFEOEM7QUFJOUMsU0FBT0gsYUFBUDtBQUNELENBTEQ7OztBQU9BLE9BQU8sTUFBTUksaUJBQWlCLEdBQUcsQ0FBQ0MsY0FBYyxFQUFFLEtBQWpCLENBQXVCLEVBQUVwRCxjQUF6QixJQUEyQztBQUFBO0FBQUE7O0FBQzFFLE1BQUksNEJBQUFvRCxjQUFjLElBQUlDLFNBQWxCLGlDQUErQkQsY0FBYyxDQUFDRSxNQUFmLEtBQTBCLENBQXpELENBQUosRUFBZ0U7QUFBQTtBQUFBO0FBQzlELFdBQU9sRCx1QkFBUDtBQUNELEdBRkQ7QUFBQTtBQUFBOztBQUdBLFFBQU0wQyxTQUFTLDZCQUFHTSxjQUFjLENBQUNuQyxNQUFmLENBQXNCc0MsT0FBTyxJQUFJO0FBQUE7QUFBQTtBQUFBLFdBQUFBLE9BQU8sQ0FBQ0MsWUFBUixHQUF1QixDQUF2QjtBQUF3QixHQUF6RCxDQUFILENBQWY7QUFDQSxRQUFNQyxhQUFhLDZCQUFHQyxJQUFJLENBQUNDLEdBQUwsQ0FDcEIsR0FBR2IsU0FBUyxDQUFDakIsR0FBVixDQUFjMEIsT0FBTyxJQUFJO0FBQUE7QUFBQTtBQUFBLFdBQUFBLE9BQU8sQ0FBQ0ssVUFBUjtBQUFrQixHQUEzQyxDQURpQixFQUVwQixHQUZvQixDQUFILENBQW5CO0FBSUEsUUFBTUMsYUFBYSw2QkFBR0gsSUFBSSxDQUFDSSxHQUFMLENBQ3BCLEdBQUdoQixTQUFTLENBQUNqQixHQUFWLENBQWMwQixPQUFPLElBQUk7QUFBQTtBQUFBO0FBQUEsV0FBQUEsT0FBTyxDQUFDSyxVQUFSO0FBQWtCLEdBQTNDLENBRGlCLEVBRXBCLEdBRm9CLENBQUgsQ0FBbkI7QUFLQSxRQUFNRyxlQUFlLDZCQUFHTCxJQUFJLENBQUNDLEdBQUwsQ0FDdEIsR0FBR2IsU0FBUyxDQUFDakIsR0FBVixDQUFjMEIsT0FBTyxJQUFJO0FBQUE7QUFBQTtBQUFBLFdBQUFBLE9BQU8sQ0FBQ0MsWUFBUjtBQUFvQixHQUE3QyxDQURtQixFQUV0QixHQUZzQixDQUFILENBQXJCO0FBSUEsUUFBTVEsZUFBZSw2QkFBR04sSUFBSSxDQUFDSSxHQUFMLENBQ3RCLEdBQUdoQixTQUFTLENBQUNqQixHQUFWLENBQWMwQixPQUFPLElBQUk7QUFBQTtBQUFBO0FBQUEsV0FBQUEsT0FBTyxDQUFDQyxZQUFSO0FBQW9CLEdBQTdDLENBRG1CLEVBRXRCLEdBRnNCLENBQUgsQ0FBckI7QUFLQSxRQUFNUyxxQkFBcUIsNkJBQ3pCbkIsU0FBUyxDQUFDUSxNQUFWLEdBQW1CLENBQW5CLCtCQUNJcEQsbUJBQW1CLENBQUMyQyxpQkFBaUIsQ0FBQ0MsU0FBRCxDQUFqQixDQUE2QlYsT0FBOUIsQ0FEdkIsZ0NBRUksR0FGSixDQUR5QixDQUEzQjtBQXZCMEU7QUE0QjFFLFNBQU87QUFDTDhCLElBQUFBLGlCQUFpQixFQUFFcEIsU0FBUyxDQUFDUSxNQUR4QjtBQUVMVSxJQUFBQSxlQUFlLEVBQUVBLGVBQWUsR0FBR0QsZUFBbEIsK0JBQW9DLENBQXBDLGdDQUF3Q0MsZUFBeEMsQ0FGWjtBQUdMRCxJQUFBQSxlQUFlLEVBQUVBLGVBSFo7QUFJTEYsSUFBQUEsYUFBYSxFQUFFQSxhQUFhLEdBQUdKLGFBQWhCLCtCQUFnQyxDQUFoQyxnQ0FBb0NJLGFBQXBDLENBSlY7QUFLTEosSUFBQUEsYUFBYSxFQUFFQSxhQUxWO0FBTUxRLElBQUFBLHFCQUFxQixFQUFFQTtBQU5sQixHQUFQO0FBUUQsQ0FwQ007O0FBc0NQLE9BQU8sTUFBTUUsMEJBQTBCLEdBQUcsQ0FDeENDLFNBQVMsRUFBRXZFLFNBRDZCLEVBRXhDd0UsUUFGd0MsQ0FFL0IsRUFBRXZFLFFBRjZCLENBR3pDLEVBQUVLLG1CQUFtQixFQUhvQixJQUdkO0FBQUE7QUFBQTs7QUFDMUIsTUFBSSw2QkFBQ2tFLFFBQUQsaUNBQWEsQ0FBQ0EsUUFBUSxDQUFDQyxZQUF2QixDQUFKLEVBQXlDO0FBQUE7QUFBQTtBQUN2QyxXQUFPLEVBQVA7QUFDRCxHQUZEO0FBQUE7QUFBQTs7QUFHQSxRQUFNL0QsU0FBUyw2QkFBRzhELFFBQVEsQ0FBQ0MsWUFBWixDQUFmO0FBQ0EsUUFBTWxDLE9BQU8sNkJBQUdpQyxRQUFRLENBQUNFLE9BQVQsZ0NBQ1pGLFFBQVEsQ0FBQ0csV0FERyxpQ0FFWkosU0FBUyxDQUFDSyxPQUFWLENBQWtCQyxPQUFsQixFQUZZLENBQUgsQ0FBYjtBQUlBLFFBQU05QixPQUFPLDZCQUNYLDZCQUFBeUIsUUFBUSxDQUFDRSxPQUFULGtDQUFvQkYsUUFBUSxDQUFDRyxXQUE3QixpQ0FDSyw2QkFBNEJ2RSxhQUFhLENBQ3hDTSxTQUR3QyxDQUV4QyxPQUFNTixhQUFhLENBQUNvRSxRQUFRLENBQUNHLFdBQVYsQ0FBdUIsRUFIaEQsaUNBSUssNkJBQTRCdkUsYUFBYSxDQUFDTSxTQUFELENBQVksWUFKMUQsQ0FEVyxDQUFiO0FBTUEsUUFBTW9FLFlBQVksNkJBQ2hCcEUsU0FBUyxJQUFJNkQsU0FBUyxDQUFDUSxTQUFWLENBQW9CRixPQUFwQixFQUFiLGdDQUNJbkUsU0FESixpQ0FFSTZELFNBQVMsQ0FBQ1EsU0FBVixDQUFvQkYsT0FBcEIsRUFGSixDQURnQixDQUFsQjtBQWYwQjtBQW1CMUIsU0FBTyxDQUNMO0FBQ0VHLElBQUFBLFdBQVcsRUFBRTtBQUNYQyxNQUFBQSxFQUFFLEVBQUVILFlBRE87QUFFWEksTUFBQUEsRUFBRSxFQUFFM0M7QUFGTyxLQURmO0FBS0VRLElBQUFBLE9BQU8sRUFBRUE7QUFMWCxHQURLLENBQVA7QUFTRCxDQS9CTSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuXG4gKiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIG9yIGluIHRoZSBcImxpY2Vuc2VcIiBmaWxlIGFjY29tcGFueWluZyB0aGlzIGZpbGUuIFRoaXMgZmlsZSBpcyBkaXN0cmlidXRlZFxuICogb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyXG4gKiBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZ1xuICogcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQge1xuICBEYXRlUmFuZ2UsXG4gIERldGVjdG9yLFxuICBNb25pdG9yQWxlcnQsXG4gIEFub21hbHlTdW1tYXJ5LFxufSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBkYXRlRm9ybWF0dGVyLCBtaW51dGVEYXRlRm9ybWF0dGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvaGVscGVycyc7XG5pbXBvcnQgeyBSZWN0QW5ub3RhdGlvbkRhdHVtIH0gZnJvbSAnQGVsYXN0aWMvY2hhcnRzJztcbmltcG9ydCB7IERFRkFVTFRfQU5PTUFMWV9TVU1NQVJZIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgY29uc3QgZ2V0QWxlcnRzUXVlcnkgPSAobW9uaXRvcklkOiBzdHJpbmcsIHN0YXJ0VGltZTogbnVtYmVyKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaW5kZXg6ICcub3BlbmRpc3Ryby1hbGVydGluZy1hbGVydConLFxuICAgIHNpemU6IDEwMDAsXG4gICAgcmF3UXVlcnk6IHtcbiAgICAgIGFnZ3JlZ2F0aW9uczoge1xuICAgICAgICB0b3RhbF9hbGVydHM6IHtcbiAgICAgICAgICB2YWx1ZV9jb3VudDoge1xuICAgICAgICAgICAgZmllbGQ6ICdtb25pdG9yX2lkJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJvb2w6IHtcbiAgICAgICAgICBmaWx0ZXI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGVybToge1xuICAgICAgICAgICAgICAgIG1vbml0b3JfaWQ6IG1vbml0b3JJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZToge1xuICAgICAgICAgICAgICAgICAgZ3RlOiBzdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgICBmb3JtYXQ6ICdlcG9jaF9taWxsaXMnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgc29ydDogW3sgc3RhcnRfdGltZTogeyBvcmRlcjogJ2Rlc2MnIH0gfV0sXG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb252ZXJ0QWxlcnRzID0gKHJlc3BvbnNlOiBhbnkpOiBNb25pdG9yQWxlcnRbXSA9PiB7XG4gIGNvbnN0IGhpdHMgPSBnZXQocmVzcG9uc2UsICdkYXRhLnJlc3BvbnNlLmhpdHMuaGl0cycsIFtdKTtcbiAgcmV0dXJuIGhpdHMubWFwKChhbGVydDogYW55KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vbml0b3JOYW1lOiBnZXQoYWxlcnQsICdfc291cmNlLm1vbml0b3JfbmFtZScpLFxuICAgICAgdHJpZ2dlck5hbWU6IGdldChhbGVydCwgJ19zb3VyY2UudHJpZ2dlcl9uYW1lJyksXG4gICAgICBzZXZlcml0eTogZ2V0KGFsZXJ0LCAnX3NvdXJjZS5zZXZlcml0eScpLFxuICAgICAgc3RhdGU6IGdldChhbGVydCwgJ19zb3VyY2Uuc3RhdGUnKSxcbiAgICAgIGVycm9yOiBnZXQoYWxlcnQsICdfc291cmNlLmVycm9yX21lc3NhZ2UnKSxcbiAgICAgIHN0YXJ0VGltZTogZ2V0KGFsZXJ0LCAnX3NvdXJjZS5zdGFydF90aW1lJyksXG4gICAgICBlbmRUaW1lOiBnZXQoYWxlcnQsICdfc291cmNlLmVuZF90aW1lJyksXG4gICAgICBhY2tub3dsZWRnZWRUaW1lOiBnZXQoYWxlcnQsICdfc291cmNlLmFja25vd2xlZGdlZF90aW1lJyksXG4gICAgfTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRBbGVydE1lc3NhZ2UgPSAoYWxlcnQ6IE1vbml0b3JBbGVydCk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBhbGVydC5lbmRUaW1lXG4gICAgPyBgVGhlcmUgaXMgYSBzZXZlcml0eSAke2FsZXJ0LnNldmVyaXR5fSBhbGVydCB3aXRoIHN0YXRlICR7XG4gICAgICAgIGFsZXJ0LnN0YXRlXG4gICAgICB9IGJldHdlZW4gJHtkYXRlRm9ybWF0dGVyKGFsZXJ0LnN0YXJ0VGltZSl9IGFuZCAke2RhdGVGb3JtYXR0ZXIoXG4gICAgICAgIGFsZXJ0LmVuZFRpbWVcbiAgICAgICl9LmBcbiAgICA6IGBUaGVyZSBpcyBhIHNldmVyaXR5ICR7YWxlcnQuc2V2ZXJpdHl9IGFsZXJ0IHdpdGggc3RhdGUgJHtcbiAgICAgICAgYWxlcnQuc3RhdGVcbiAgICAgIH0gZnJvbSAke2RhdGVGb3JtYXR0ZXIoYWxlcnQuc3RhcnRUaW1lKX0uYDtcbiAgcmV0dXJuIGFsZXJ0LmVycm9yID8gYCR7bWVzc2FnZX0gRXJyb3IgbWVzc2FnZTogJHthbGVydC5lcnJvcn1gIDogbWVzc2FnZTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUFsZXJ0QW5ub3RhdGlvbnMgPSAoYWxlcnRzOiBNb25pdG9yQWxlcnRbXSk6IGFueVtdID0+IHtcbiAgcmV0dXJuIGFsZXJ0cy5tYXAoKGFsZXJ0OiBNb25pdG9yQWxlcnQpID0+ICh7XG4gICAgaGVhZGVyOiBkYXRlRm9ybWF0dGVyKGFsZXJ0LnN0YXJ0VGltZSksXG4gICAgZGF0YVZhbHVlOiBhbGVydC5zdGFydFRpbWUsXG4gICAgZGV0YWlsczogZ2V0QWxlcnRNZXNzYWdlKGFsZXJ0KSxcbiAgfSkpO1xufTtcblxuY29uc3QgZmluZExhdGVzdEFub21hbHkgPSAoYW5vbWFsaWVzOiBhbnlbXSkgPT4ge1xuICBjb25zdCBsYXRlc3RBbm9tYWx5ID0gYW5vbWFsaWVzLnJlZHVjZSgocHJldkFub21hbHksIGN1ckFub21hbHkpID0+XG4gICAgcHJldkFub21hbHkuc3RhcnRUaW1lID4gY3VyQW5vbWFseS5zdGFydFRpbWUgPyBwcmV2QW5vbWFseSA6IGN1ckFub21hbHlcbiAgKTtcbiAgcmV0dXJuIGxhdGVzdEFub21hbHk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QW5vbWFseVN1bW1hcnkgPSAodG90YWxBbm9tYWxpZXM6IGFueVtdKTogQW5vbWFseVN1bW1hcnkgPT4ge1xuICBpZiAodG90YWxBbm9tYWxpZXMgPT0gdW5kZWZpbmVkIHx8IHRvdGFsQW5vbWFsaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBERUZBVUxUX0FOT01BTFlfU1VNTUFSWTtcbiAgfVxuICBjb25zdCBhbm9tYWxpZXMgPSB0b3RhbEFub21hbGllcy5maWx0ZXIoYW5vbWFseSA9PiBhbm9tYWx5LmFub21hbHlHcmFkZSA+IDApO1xuICBjb25zdCBtYXhDb25maWRlbmNlID0gTWF0aC5tYXgoXG4gICAgLi4uYW5vbWFsaWVzLm1hcChhbm9tYWx5ID0+IGFub21hbHkuY29uZmlkZW5jZSksXG4gICAgMC4wXG4gICk7XG4gIGNvbnN0IG1pbkNvbmZpZGVuY2UgPSBNYXRoLm1pbihcbiAgICAuLi5hbm9tYWxpZXMubWFwKGFub21hbHkgPT4gYW5vbWFseS5jb25maWRlbmNlKSxcbiAgICAxLjBcbiAgKTtcblxuICBjb25zdCBtYXhBbm9tYWx5R3JhZGUgPSBNYXRoLm1heChcbiAgICAuLi5hbm9tYWxpZXMubWFwKGFub21hbHkgPT4gYW5vbWFseS5hbm9tYWx5R3JhZGUpLFxuICAgIDAuMFxuICApO1xuICBjb25zdCBtaW5Bbm9tYWx5R3JhZGUgPSBNYXRoLm1pbihcbiAgICAuLi5hbm9tYWxpZXMubWFwKGFub21hbHkgPT4gYW5vbWFseS5hbm9tYWx5R3JhZGUpLFxuICAgIDEuMFxuICApO1xuXG4gIGNvbnN0IGxhc3RBbm9tYWx5T2NjdXJyZW5jZSA9XG4gICAgYW5vbWFsaWVzLmxlbmd0aCA+IDBcbiAgICAgID8gbWludXRlRGF0ZUZvcm1hdHRlcihmaW5kTGF0ZXN0QW5vbWFseShhbm9tYWxpZXMpLmVuZFRpbWUpXG4gICAgICA6ICctJztcblxuICByZXR1cm4ge1xuICAgIGFub21hbHlPY2N1cnJlbmNlOiBhbm9tYWxpZXMubGVuZ3RoLFxuICAgIG1pbkFub21hbHlHcmFkZTogbWluQW5vbWFseUdyYWRlID4gbWF4QW5vbWFseUdyYWRlID8gMCA6IG1pbkFub21hbHlHcmFkZSxcbiAgICBtYXhBbm9tYWx5R3JhZGU6IG1heEFub21hbHlHcmFkZSxcbiAgICBtaW5Db25maWRlbmNlOiBtaW5Db25maWRlbmNlID4gbWF4Q29uZmlkZW5jZSA/IDAgOiBtaW5Db25maWRlbmNlLFxuICAgIG1heENvbmZpZGVuY2U6IG1heENvbmZpZGVuY2UsXG4gICAgbGFzdEFub21hbHlPY2N1cnJlbmNlOiBsYXN0QW5vbWFseU9jY3VycmVuY2UsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZWRIaXN0b3J5QW5ub3RhdGlvbnMgPSAoXG4gIGRhdGVSYW5nZTogRGF0ZVJhbmdlLFxuICBkZXRlY3Rvcj86IERldGVjdG9yXG4pOiBSZWN0QW5ub3RhdGlvbkRhdHVtW10gPT4ge1xuICBpZiAoIWRldGVjdG9yIHx8ICFkZXRlY3Rvci5kaXNhYmxlZFRpbWUpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3Qgc3RhcnRUaW1lID0gZGV0ZWN0b3IuZGlzYWJsZWRUaW1lO1xuICBjb25zdCBlbmRUaW1lID0gZGV0ZWN0b3IuZW5hYmxlZFxuICAgID8gZGV0ZWN0b3IuZW5hYmxlZFRpbWVcbiAgICA6IGRhdGVSYW5nZS5lbmREYXRlLnZhbHVlT2YoKTtcblxuICBjb25zdCBkZXRhaWxzID1cbiAgICBkZXRlY3Rvci5lbmFibGVkICYmIGRldGVjdG9yLmVuYWJsZWRUaW1lXG4gICAgICA/IGBEZXRlY3RvciB3YXMgc3RvcHBlZCBmcm9tICR7ZGF0ZUZvcm1hdHRlcihcbiAgICAgICAgICBzdGFydFRpbWVcbiAgICAgICAgKX0gdG8gJHtkYXRlRm9ybWF0dGVyKGRldGVjdG9yLmVuYWJsZWRUaW1lKX1gXG4gICAgICA6IGBEZXRlY3RvciB3YXMgc3RvcHBlZCBmcm9tICR7ZGF0ZUZvcm1hdHRlcihzdGFydFRpbWUpfSB1bnRpbCBub3dgO1xuICBjb25zdCBjb29yZGluYXRlWDAgPVxuICAgIHN0YXJ0VGltZSA+PSBkYXRlUmFuZ2Uuc3RhcnREYXRlLnZhbHVlT2YoKVxuICAgICAgPyBzdGFydFRpbWVcbiAgICAgIDogZGF0ZVJhbmdlLnN0YXJ0RGF0ZS52YWx1ZU9mKCk7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgY29vcmRpbmF0ZXM6IHtcbiAgICAgICAgeDA6IGNvb3JkaW5hdGVYMCxcbiAgICAgICAgeDE6IGVuZFRpbWUsXG4gICAgICB9LFxuICAgICAgZGV0YWlsczogZGV0YWlscyxcbiAgICB9LFxuICBdO1xufTtcbiJdfQ==