function cov_bj19df2bg() {
  var path = "/Users/yizheliu/casesafe/workspace/kibana-780/kibana/plugins/anomaly-detection-kibana-plugin/public/pages/DetectorResults/utils/utils.ts";
  var hash = "d974276b33bb47447303d833b6fca44dff0936b1";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/yizheliu/casesafe/workspace/kibana-780/kibana/plugins/anomaly-detection-kibana-plugin/public/pages/DetectorResults/utils/utils.ts",
    statementMap: {
      "0": {
        start: {
          line: 25,
          column: 38
        },
        end: {
          line: 25,
          column: 54
        }
      },
      "1": {
        start: {
          line: 26,
          column: 34
        },
        end: {
          line: 26,
          column: 47
        }
      },
      "2": {
        start: {
          line: 27,
          column: 40
        },
        end: {
          line: 27,
          column: 58
        }
      },
      "3": {
        start: {
          line: 28,
          column: 38
        },
        end: {
          line: 28,
          column: 54
        }
      },
      "4": {
        start: {
          line: 30,
          column: 45
        },
        end: {
          line: 42,
          column: 1
        }
      },
      "5": {
        start: {
          line: 31,
          column: 22
        },
        end: {
          line: 31,
          column: 30
        }
      },
      "6": {
        start: {
          line: 33,
          column: 15
        },
        end: {
          line: 36,
          column: 3
        }
      },
      "7": {
        start: {
          line: 37,
          column: 2
        },
        end: {
          line: 40,
          column: 3
        }
      },
      "8": {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 38,
          column: 42
        }
      },
      "9": {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 66
        }
      },
      "10": {
        start: {
          line: 41,
          column: 2
        },
        end: {
          line: 41,
          column: 16
        }
      },
      "11": {
        start: {
          line: 44,
          column: 31
        },
        end: {
          line: 59,
          column: 1
        }
      },
      "12": {
        start: {
          line: 45,
          column: 2
        },
        end: {
          line: 58,
          column: 4
        }
      },
      "13": {
        start: {
          line: 61,
          column: 31
        },
        end: {
          line: 79,
          column: 1
        }
      },
      "14": {
        start: {
          line: 62,
          column: 15
        },
        end: {
          line: 65,
          column: 3
        }
      },
      "15": {
        start: {
          line: 66,
          column: 2
        },
        end: {
          line: 68,
          column: 3
        }
      },
      "16": {
        start: {
          line: 67,
          column: 4
        },
        end: {
          line: 67,
          column: 18
        }
      },
      "17": {
        start: {
          line: 69,
          column: 2
        },
        end: {
          line: 77,
          column: 3
        }
      },
      "18": {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 70,
          column: 62
        }
      },
      "19": {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 72,
          column: 57
        }
      },
      "20": {
        start: {
          line: 73,
          column: 9
        },
        end: {
          line: 77,
          column: 3
        }
      },
      "21": {
        start: {
          line: 74,
          column: 4
        },
        end: {
          line: 74,
          column: 64
        }
      },
      "22": {
        start: {
          line: 75,
          column: 4
        },
        end: {
          line: 76,
          column: 104
        }
      },
      "23": {
        start: {
          line: 78,
          column: 2
        },
        end: {
          line: 78,
          column: 16
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 30,
            column: 45
          },
          end: {
            line: 30,
            column: 46
          }
        },
        loc: {
          start: {
            line: 30,
            column: 69
          },
          end: {
            line: 42,
            column: 1
          }
        },
        line: 30
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 44,
            column: 31
          },
          end: {
            line: 44,
            column: 32
          }
        },
        loc: {
          start: {
            line: 44,
            column: 76
          },
          end: {
            line: 59,
            column: 1
          }
        },
        line: 44
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 61,
            column: 31
          },
          end: {
            line: 61,
            column: 32
          }
        },
        loc: {
          start: {
            line: 61,
            column: 55
          },
          end: {
            line: 79,
            column: 1
          }
        },
        line: 61
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 37,
            column: 2
          },
          end: {
            line: 40,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 2
          },
          end: {
            line: 40,
            column: 3
          }
        }, {
          start: {
            line: 37,
            column: 2
          },
          end: {
            line: 40,
            column: 3
          }
        }],
        line: 37
      },
      "1": {
        loc: {
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 57,
            column: 39
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 46,
            column: 12
          }
        }, {
          start: {
            line: 47,
            column: 4
          },
          end: {
            line: 47,
            column: 45
          }
        }, {
          start: {
            line: 48,
            column: 4
          },
          end: {
            line: 48,
            column: 23
          }
        }, {
          start: {
            line: 49,
            column: 4
          },
          end: {
            line: 49,
            column: 61
          }
        }, {
          start: {
            line: 51,
            column: 4
          },
          end: {
            line: 57,
            column: 39
          }
        }],
        line: 46
      },
      "2": {
        loc: {
          start: {
            line: 66,
            column: 2
          },
          end: {
            line: 68,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 66,
            column: 2
          },
          end: {
            line: 68,
            column: 3
          }
        }, {
          start: {
            line: 66,
            column: 2
          },
          end: {
            line: 68,
            column: 3
          }
        }],
        line: 66
      },
      "3": {
        loc: {
          start: {
            line: 69,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 69,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        }, {
          start: {
            line: 69,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        }],
        line: 69
      },
      "4": {
        loc: {
          start: {
            line: 73,
            column: 9
          },
          end: {
            line: 77,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 73,
            column: 9
          },
          end: {
            line: 77,
            column: 3
          }
        }, {
          start: {
            line: 73,
            column: 9
          },
          end: {
            line: 77,
            column: 3
          }
        }],
        line: 73
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0, 0, 0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d974276b33bb47447303d833b6fca44dff0936b1"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_bj19df2bg = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_bj19df2bg();

/*
 * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License").
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the "license" file accompanying this file. This file is distributed
 * on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
import { Detector } from '../../../models/interfaces';
import { NO_FULL_SHINGLE_ERROR_MESSAGE, NO_DATA_IN_WINDOW_ERROR_MESSAGE, NO_RCF_MODEL_ERROR_MESSAGE } from './constants';
import { DETECTOR_STATE, SHINGLE_SIZE } from '../../../utils/constants';
import moment, { Moment } from 'moment';
import { DETECTOR_INIT_FAILURES } from '../../../pages/DetectorDetail/utils/constants';
export const IS_INIT_OVERTIME_FIELD = (cov_bj19df2bg().s[0]++, 'isInitOvertime');
export const INIT_DETAILS_FIELD = (cov_bj19df2bg().s[1]++, 'initDetails');
export const INIT_ERROR_MESSAGE_FIELD = (cov_bj19df2bg().s[2]++, 'initErrorMessage');
export const INIT_ACTION_ITEM_FIELD = (cov_bj19df2bg().s[3]++, 'initActionItem');
cov_bj19df2bg().s[4]++;
export const getDetectorInitializationInfo = (detector: Detector) => {
  cov_bj19df2bg().f[0]++;
  const currentTime = (cov_bj19df2bg().s[5]++, moment());
  let result = (cov_bj19df2bg().s[6]++, {
    [IS_INIT_OVERTIME_FIELD]: false,
    [INIT_DETAILS_FIELD]: {}
  });
  cov_bj19df2bg().s[7]++;

  if (isDetectorInitOverTime(currentTime, detector)) {
    cov_bj19df2bg().b[0][0]++;
    cov_bj19df2bg().s[8]++;
    result[IS_INIT_OVERTIME_FIELD] = true;
    cov_bj19df2bg().s[9]++;
    result[INIT_DETAILS_FIELD] = getInitOverTimeDetails(detector);
  } else {
    cov_bj19df2bg().b[0][1]++;
  }

  cov_bj19df2bg().s[10]++;
  return result;
};
cov_bj19df2bg().s[11]++;

const isDetectorInitOverTime = (currentTime: Moment, detector: Detector) => {
  cov_bj19df2bg().f[1]++;
  cov_bj19df2bg().s[12]++;
  return (cov_bj19df2bg().b[1][0]++, detector) && (cov_bj19df2bg().b[1][1]++, detector.curState === DETECTOR_STATE.INIT) && (cov_bj19df2bg().b[1][2]++, detector.stateError) && (cov_bj19df2bg().b[1][3]++, !detector.stateError.includes(NO_RCF_MODEL_ERROR_MESSAGE)) && (cov_bj19df2bg().b[1][4]++, //@ts-ignore
  currentTime.subtract(SHINGLE_SIZE * detector.detectionInterval.period.interval, detector.detectionInterval.period.unit.toLowerCase()) //@ts-ignore
  .valueOf() > detector.enabledTime);
};

cov_bj19df2bg().s[13]++;

const getInitOverTimeDetails = (detector: Detector) => {
  cov_bj19df2bg().f[2]++;
  let result = (cov_bj19df2bg().s[14]++, {
    [INIT_ERROR_MESSAGE_FIELD]: '',
    [INIT_ACTION_ITEM_FIELD]: ''
  });
  cov_bj19df2bg().s[15]++;

  if (!detector.stateError) {
    cov_bj19df2bg().b[2][0]++;
    cov_bj19df2bg().s[16]++;
    return result;
  } else {
    cov_bj19df2bg().b[2][1]++;
  }

  cov_bj19df2bg().s[17]++;

  if (detector.stateError.includes(NO_FULL_SHINGLE_ERROR_MESSAGE)) {
    cov_bj19df2bg().b[3][0]++;
    cov_bj19df2bg().s[18]++;
    result[INIT_ERROR_MESSAGE_FIELD] = 'of insufficient data';
    cov_bj19df2bg().s[19]++;
    result[INIT_ACTION_ITEM_FIELD] = DETECTOR_INIT_FAILURES.NO_TRAINING_DATA.actionItem;
  } else {
    cov_bj19df2bg().b[3][1]++;
    cov_bj19df2bg().s[20]++;

    if (detector.stateError.includes(NO_DATA_IN_WINDOW_ERROR_MESSAGE)) {
      cov_bj19df2bg().b[4][0]++;
      cov_bj19df2bg().s[21]++;
      result[INIT_ERROR_MESSAGE_FIELD] = 'no data could be found';
      cov_bj19df2bg().s[22]++;
      result[INIT_ACTION_ITEM_FIELD] = 'Make sure your source index has sufficient data in the current detector interval and try again.';
    } else {
      cov_bj19df2bg().b[4][1]++;
    }
  }

  cov_bj19df2bg().s[23]++;
  return result;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLnRzIl0sIm5hbWVzIjpbIkRldGVjdG9yIiwiTk9fRlVMTF9TSElOR0xFX0VSUk9SX01FU1NBR0UiLCJOT19EQVRBX0lOX1dJTkRPV19FUlJPUl9NRVNTQUdFIiwiTk9fUkNGX01PREVMX0VSUk9SX01FU1NBR0UiLCJERVRFQ1RPUl9TVEFURSIsIlNISU5HTEVfU0laRSIsIm1vbWVudCIsIk1vbWVudCIsIkRFVEVDVE9SX0lOSVRfRkFJTFVSRVMiLCJJU19JTklUX09WRVJUSU1FX0ZJRUxEIiwiSU5JVF9ERVRBSUxTX0ZJRUxEIiwiSU5JVF9FUlJPUl9NRVNTQUdFX0ZJRUxEIiwiSU5JVF9BQ1RJT05fSVRFTV9GSUVMRCIsImdldERldGVjdG9ySW5pdGlhbGl6YXRpb25JbmZvIiwiZGV0ZWN0b3IiLCJjdXJyZW50VGltZSIsInJlc3VsdCIsImlzRGV0ZWN0b3JJbml0T3ZlclRpbWUiLCJnZXRJbml0T3ZlclRpbWVEZXRhaWxzIiwiY3VyU3RhdGUiLCJJTklUIiwic3RhdGVFcnJvciIsImluY2x1ZGVzIiwic3VidHJhY3QiLCJkZXRlY3Rpb25JbnRlcnZhbCIsInBlcmlvZCIsImludGVydmFsIiwidW5pdCIsInRvTG93ZXJDYXNlIiwidmFsdWVPZiIsImVuYWJsZWRUaW1lIiwiTk9fVFJBSU5JTkdfREFUQSIsImFjdGlvbkl0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QVA7QUFDRCxHQUZEO0FBQUE7QUFBQTs7QUFMcUQ7O0FBUXJELE1BQUlGLFFBQVEsQ0FBQ08sVUFBVCxDQUFvQkMsUUFBcEIsQ0FBNkJyQiw2QkFBN0IsQ0FBSixFQUFpRTtBQUFBO0FBQUE7QUFDL0RlLElBQUFBLE1BQU0sQ0FBQ0wsd0JBQUQsQ0FBTixHQUFtQyxzQkFBbkM7QUFEK0Q7QUFFL0RLLElBQUFBLE1BQU0sQ0FBQ0osc0JBQUQsQ0FBTixHQUNFSixzQkFBc0IsQ0FBQ3VCLGdCQUF2QixDQUF3Q0MsVUFEMUM7QUFFRCxHQUpELE1BSU87QUFBQTtBQUFBOztBQUFBLFFBQUlsQixRQUFRLENBQUNPLFVBQVQsQ0FBb0JDLFFBQXBCLENBQTZCcEIsK0JBQTdCLENBQUosRUFBbUU7QUFBQTtBQUFBO0FBQ3hFYyxNQUFBQSxNQUFNLENBQUNMLHdCQUFELENBQU4sR0FBbUMsd0JBQW5DO0FBRHdFO0FBRXhFSyxNQUFBQSxNQUFNLENBQUNKLHNCQUFELENBQU4sR0FDRSxpR0FERjtBQUVELEtBSk07QUFBQTtBQUFBO0FBSU47O0FBaEJvRDtBQWlCckQsU0FBT0ksTUFBUDtBQUNELENBbEJEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIwIEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKS5cbiAqIFlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIEEgY29weSBvZiB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogb3IgaW4gdGhlIFwibGljZW5zZVwiIGZpbGUgYWNjb21wYW55aW5nIHRoaXMgZmlsZS4gVGhpcyBmaWxlIGlzIGRpc3RyaWJ1dGVkXG4gKiBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXJcbiAqIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nXG4gKiBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IERldGVjdG9yIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtcbiAgTk9fRlVMTF9TSElOR0xFX0VSUk9SX01FU1NBR0UsXG4gIE5PX0RBVEFfSU5fV0lORE9XX0VSUk9SX01FU1NBR0UsXG4gIE5PX1JDRl9NT0RFTF9FUlJPUl9NRVNTQUdFLFxufSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBERVRFQ1RPUl9TVEFURSwgU0hJTkdMRV9TSVpFIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCBtb21lbnQsIHsgTW9tZW50IH0gZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IERFVEVDVE9SX0lOSVRfRkFJTFVSRVMgfSBmcm9tICcuLi8uLi8uLi9wYWdlcy9EZXRlY3RvckRldGFpbC91dGlscy9jb25zdGFudHMnO1xuXG5leHBvcnQgY29uc3QgSVNfSU5JVF9PVkVSVElNRV9GSUVMRCA9ICdpc0luaXRPdmVydGltZSc7XG5leHBvcnQgY29uc3QgSU5JVF9ERVRBSUxTX0ZJRUxEID0gJ2luaXREZXRhaWxzJztcbmV4cG9ydCBjb25zdCBJTklUX0VSUk9SX01FU1NBR0VfRklFTEQgPSAnaW5pdEVycm9yTWVzc2FnZSc7XG5leHBvcnQgY29uc3QgSU5JVF9BQ1RJT05fSVRFTV9GSUVMRCA9ICdpbml0QWN0aW9uSXRlbSc7XG5cbmV4cG9ydCBjb25zdCBnZXREZXRlY3RvckluaXRpYWxpemF0aW9uSW5mbyA9IChkZXRlY3RvcjogRGV0ZWN0b3IpID0+IHtcbiAgY29uc3QgY3VycmVudFRpbWUgPSBtb21lbnQoKTtcblxuICBsZXQgcmVzdWx0ID0ge1xuICAgIFtJU19JTklUX09WRVJUSU1FX0ZJRUxEXTogZmFsc2UsXG4gICAgW0lOSVRfREVUQUlMU19GSUVMRF06IHt9LFxuICB9O1xuICBpZiAoaXNEZXRlY3RvckluaXRPdmVyVGltZShjdXJyZW50VGltZSwgZGV0ZWN0b3IpKSB7XG4gICAgcmVzdWx0W0lTX0lOSVRfT1ZFUlRJTUVfRklFTERdID0gdHJ1ZTtcbiAgICByZXN1bHRbSU5JVF9ERVRBSUxTX0ZJRUxEXSA9IGdldEluaXRPdmVyVGltZURldGFpbHMoZGV0ZWN0b3IpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5jb25zdCBpc0RldGVjdG9ySW5pdE92ZXJUaW1lID0gKGN1cnJlbnRUaW1lOiBNb21lbnQsIGRldGVjdG9yOiBEZXRlY3RvcikgPT4ge1xuICByZXR1cm4gKFxuICAgIGRldGVjdG9yICYmXG4gICAgZGV0ZWN0b3IuY3VyU3RhdGUgPT09IERFVEVDVE9SX1NUQVRFLklOSVQgJiZcbiAgICBkZXRlY3Rvci5zdGF0ZUVycm9yICYmXG4gICAgIWRldGVjdG9yLnN0YXRlRXJyb3IuaW5jbHVkZXMoTk9fUkNGX01PREVMX0VSUk9SX01FU1NBR0UpICYmXG4gICAgLy9AdHMtaWdub3JlXG4gICAgY3VycmVudFRpbWVcbiAgICAgIC5zdWJ0cmFjdChcbiAgICAgICAgU0hJTkdMRV9TSVpFICogZGV0ZWN0b3IuZGV0ZWN0aW9uSW50ZXJ2YWwucGVyaW9kLmludGVydmFsLFxuICAgICAgICBkZXRlY3Rvci5kZXRlY3Rpb25JbnRlcnZhbC5wZXJpb2QudW5pdC50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIC52YWx1ZU9mKCkgPiBkZXRlY3Rvci5lbmFibGVkVGltZVxuICApO1xufTtcblxuY29uc3QgZ2V0SW5pdE92ZXJUaW1lRGV0YWlscyA9IChkZXRlY3RvcjogRGV0ZWN0b3IpID0+IHtcbiAgbGV0IHJlc3VsdCA9IHtcbiAgICBbSU5JVF9FUlJPUl9NRVNTQUdFX0ZJRUxEXTogJycsXG4gICAgW0lOSVRfQUNUSU9OX0lURU1fRklFTERdOiAnJyxcbiAgfTtcbiAgaWYgKCFkZXRlY3Rvci5zdGF0ZUVycm9yKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBpZiAoZGV0ZWN0b3Iuc3RhdGVFcnJvci5pbmNsdWRlcyhOT19GVUxMX1NISU5HTEVfRVJST1JfTUVTU0FHRSkpIHtcbiAgICByZXN1bHRbSU5JVF9FUlJPUl9NRVNTQUdFX0ZJRUxEXSA9ICdvZiBpbnN1ZmZpY2llbnQgZGF0YSc7XG4gICAgcmVzdWx0W0lOSVRfQUNUSU9OX0lURU1fRklFTERdID1cbiAgICAgIERFVEVDVE9SX0lOSVRfRkFJTFVSRVMuTk9fVFJBSU5JTkdfREFUQS5hY3Rpb25JdGVtO1xuICB9IGVsc2UgaWYgKGRldGVjdG9yLnN0YXRlRXJyb3IuaW5jbHVkZXMoTk9fREFUQV9JTl9XSU5ET1dfRVJST1JfTUVTU0FHRSkpIHtcbiAgICByZXN1bHRbSU5JVF9FUlJPUl9NRVNTQUdFX0ZJRUxEXSA9ICdubyBkYXRhIGNvdWxkIGJlIGZvdW5kJztcbiAgICByZXN1bHRbSU5JVF9BQ1RJT05fSVRFTV9GSUVMRF0gPVxuICAgICAgJ01ha2Ugc3VyZSB5b3VyIHNvdXJjZSBpbmRleCBoYXMgc3VmZmljaWVudCBkYXRhIGluIHRoZSBjdXJyZW50IGRldGVjdG9yIGludGVydmFsIGFuZCB0cnkgYWdhaW4uJztcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcbiJdfQ==